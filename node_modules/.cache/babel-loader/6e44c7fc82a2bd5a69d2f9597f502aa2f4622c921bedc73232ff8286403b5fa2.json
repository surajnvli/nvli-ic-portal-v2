{"ast":null,"code":"var _jsxFileName = \"/var/www/html/ic-portal-new/src/Archivecontext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = 'https://indianculture.nvli.in/rest/archive';\nconst AppContext = /*#__PURE__*/React.createContext();\nconst AppProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  archives;\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('a');\n  const [archives, setArchives] = useState([]);\n  const fetchArchives = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`${url}`);\n      const data = await response.json();\n      const {\n        search_results\n      } = data;\n      if (search_results) {\n        const newArchives = search_results.map(item => {\n          const {\n            nid,\n            title,\n            field_pdf_digital_file,\n            field_dc_type,\n            field_dc_date_issued\n          } = item;\n          return {\n            id: nid,\n            name: title,\n            pdffile: field_pdf_digital_file,\n            type: field_dc_type,\n            issuedate: field_dc_date_issued\n          };\n        });\n        setArchives(newArchives);\n      } else {\n        setArchives([]);\n      }\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n    }\n  }, [searchTerm]);\n  useEffect(() => {\n    fetchArchives();\n  }, [searchTerm, fetchArchives]);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      loading,\n      Archives,\n      setSearchTerm\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n// make sure use\n_s(AppProvider, \"FHyKshOmwKUzUU4KszVtFTWI8VM=\");\n_c = AppProvider;\nexport const useGlobalContext = () => {\n  _s2();\n  return useContext(AppContext);\n};\n_s2(useGlobalContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport { AppContext, AppProvider };\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useCallback","url","AppContext","createContext","AppProvider","children","archives","loading","setLoading","searchTerm","setSearchTerm","setArchives","fetchArchives","response","fetch","data","json","search_results","newArchives","map","item","nid","title","field_pdf_digital_file","field_dc_type","field_dc_date_issued","id","name","pdffile","type","issuedate","error","console","log","Archives","useGlobalContext"],"sources":["/var/www/html/ic-portal-new/src/Archivecontext.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport { useCallback } from 'react'\n\nconst url = 'https://indianculture.nvli.in/rest/archive'\nconst AppContext = React.createContext()\n\nconst AppProvider = ({ children }) => {archives\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('a')\n  const [archives, setArchives] = useState([])\n\n  const fetchArchives = useCallback(async () => {\n    setLoading(true)\n    try {\n      const response = await fetch(`${url}`)\n      const data = await response.json()\n      const { search_results } = data\n      if (search_results) {\n        const newArchives = search_results.map((item) => {\n          const { nid, title, field_pdf_digital_file, field_dc_type, field_dc_date_issued } =\n            item\n          return {\n            id: nid,\n            name: title,\n            pdffile: field_pdf_digital_file,\n            type: field_dc_type,\n            issuedate: field_dc_date_issued,\n          }\n        })\n        setArchives(newArchives)\n      } else {\n        setArchives([])\n      }\n      setLoading(false)\n    } catch (error) {\n      console.log(error)\n      setLoading(false)\n    }\n  }, [searchTerm])\n\n  useEffect(() => {\n    fetchArchives()\n  }, [searchTerm, fetchArchives])\n\n  return (\n    <AppContext.Provider\n      value={{\n        loading,\n        Archives,\n        setSearchTerm,\n      }}\n    >\n      {children}\n    </AppContext.Provider>\n  )\n}\n// make sure use\nexport const useGlobalContext = () => {\n  return useContext(AppContext)\n}\n\nexport { AppContext, AppProvider }\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,OAAO;AAAA;AAEnC,MAAMC,GAAG,GAAG,4CAA4C;AACxD,MAAMC,UAAU,gBAAGN,KAAK,CAACO,aAAa,EAAE;AAExC,MAAMC,WAAW,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EAAMC,QAAQ;EAC7C,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACY,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,GAAG,CAAC;EACjD,MAAM,CAACS,QAAQ,EAAEK,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMe,aAAa,GAAGZ,WAAW,CAAC,YAAY;IAC5CQ,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEb,GAAI,EAAC,CAAC;MACtC,MAAMc,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;MAClC,MAAM;QAAEC;MAAe,CAAC,GAAGF,IAAI;MAC/B,IAAIE,cAAc,EAAE;QAClB,MAAMC,WAAW,GAAGD,cAAc,CAACE,GAAG,CAAEC,IAAI,IAAK;UAC/C,MAAM;YAAEC,GAAG;YAAEC,KAAK;YAAEC,sBAAsB;YAAEC,aAAa;YAAEC;UAAqB,CAAC,GAC/EL,IAAI;UACN,OAAO;YACLM,EAAE,EAAEL,GAAG;YACPM,IAAI,EAAEL,KAAK;YACXM,OAAO,EAAEL,sBAAsB;YAC/BM,IAAI,EAAEL,aAAa;YACnBM,SAAS,EAAEL;UACb,CAAC;QACH,CAAC,CAAC;QACFd,WAAW,CAACO,WAAW,CAAC;MAC1B,CAAC,MAAM;QACLP,WAAW,CAAC,EAAE,CAAC;MACjB;MACAH,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOuB,KAAK,EAAE;MACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MAClBvB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,CAACC,UAAU,CAAC,CAAC;EAEhBV,SAAS,CAAC,MAAM;IACda,aAAa,EAAE;EACjB,CAAC,EAAE,CAACH,UAAU,EAAEG,aAAa,CAAC,CAAC;EAE/B,oBACE,QAAC,UAAU,CAAC,QAAQ;IAClB,KAAK,EAAE;MACLL,OAAO;MACP2B,QAAQ;MACRxB;IACF,CAAE;IAAA,UAEDL;EAAQ;IAAA;IAAA;IAAA;EAAA,QACW;AAE1B,CAAC;AACD;AAAA,GAlDMD,WAAW;AAAA,KAAXA,WAAW;AAmDjB,OAAO,MAAM+B,gBAAgB,GAAG,MAAM;EAAA;EACpC,OAAOrC,UAAU,CAACI,UAAU,CAAC;AAC/B,CAAC;AAAA,IAFYiC,gBAAgB;AAI7B,SAASjC,UAAU,EAAEE,WAAW;AAAE;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}